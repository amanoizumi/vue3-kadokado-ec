var Q=Object.defineProperty;var L=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var R=(s,t,n)=>t in s?Q(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,F=(s,t)=>{for(var n in t||(t={}))X.call(t,n)&&R(s,n,t[n]);if(L)for(var n of L(t))ee.call(t,n)&&R(s,n,t[n]);return s};import{o as m,v as _,w as o,y as h,R as te,K as c,H as C,D as x,G as y,C as T,L as A,e as oe,A as $,r as S,c as j,M as B,I as se,Y as O,$ as H,a0 as q,W as ne,Z as K}from"./vendor.93ccd42a.js";import{a as N,_ as le}from"./plus.34aa69a2.js";import{_ as E}from"./index.8d779fa5.js";import{A as ae,j as ie,k as re}from"./axios.79eff361.js";import{_ as de,a as ce,b as me,c as ue,d as _e,e as pe,f as ge,g as he}from"./eye.2cc18f53.js";import{_ as xe}from"./DashboardTopArea.ce90486f.js";import{_ as fe}from"./PageIsLoading.331d21b6.js";import{e as D}from"./emitter.cd373924.js";import{t as ve}from"./toThousands.bee33b94.js";const be={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ye=o("g",{fill:"none"},[o("path",{d:"M12 4v16m8-8H4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),we=[ye];function Pe(s,t){return m(),_("svg",be,we)}var ke={name:"heroicons-outline-plus",render:Pe};const Ue={emits:{"emit-image":s=>typeof s=="string","delete-image":s=>typeof s=="string"},props:{"temp-product-image":String},setup(s,{emit:t}){const n=h("https://fakeimg.pl/1000x1000/?text=Image"),e=h(""),l=h(!1),r=i=>{l.value=!0;const f=i.target.files[0],v=new FormData;v.append("file-to-upload",f);const p="https://vue3-course-api.hexschool.io/v2/api/kadokado/admin/upload";oe.post(p,v).then(g=>{n.value=g.data.imageUrl,l.value=!1,t("emit-image",g.data.imageUrl)}).catch(g=>{console.dir(g),l.value=!0})},d=i=>{t("delete-image",i)};return te(()=>{s.tempProductImage!==""&&(n.value=s.tempProductImage)}),{imageUrl:n,isUploading:l,inputTextImageUrl:e,uploadImage:r,deleteImage:d}}},Ie={class:"item-center relative mt-4 flex w-full justify-center overflow-hidden rounded bg-transparent"},Ae=["src"],Oe={class:"mb-2 overflow-x-auto"},Ce={key:0,class:"whitespace-nowrap text-sm text-stone-500"},De=x(" \u5716\u7247\u7DB2\u5740\uFF1A "),Me=o("br",null,null,-1),Ve={class:"relative mb-1"};function je(s,t,n,e,l,r){const d=N;return m(),_(A,null,[o("div",Ie,[e.imageUrl!=="https://fakeimg.pl/1000x1000/?text=Image"?(m(),_("span",{key:0,class:"absolute right-2 top-2 cursor-pointer rounded-full bg-white/50 p-1 text-stone-600/50 hover:bg-white hover:text-red-600",title:"\u522A\u9664\u9019\u5F35\u5716\u7247",onClick:t[0]||(t[0]=i=>e.deleteImage(e.imageUrl))},[c(d)])):C("",!0),o("img",{class:"object-cover object-center",src:e.imageUrl},null,8,Ae)]),o("div",Oe,[e.imageUrl?(m(),_("span",Ce,[De,Me,x(" "+y(e.imageUrl==="https://fakeimg.pl/1000x1000/?text=Image"?"":e.imageUrl),1)])):C("",!0)]),o("div",Ve,[o("input",{type:"file",class:T(["input-style-file",{"file:invisible":e.isUploading}]),onChange:t[1]||(t[1]=i=>e.uploadImage(i)),id:"productUpload",name:"file-to-upload"},null,34),o("button",{type:"button",class:T(["absolute left-0 top-[6px] animate-pulse rounded-full bg-stone-700 px-4 py-2 text-sm text-white",{invisible:!e.isUploading}]),disabled:""},"\u4E0A\u50B3\u4E2D ...",2)])],64)}var Ee=E(Ue,[["render",je]]);const Te={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},$e=o("g",{fill:"none"},[o("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 0 0 4.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 0 1-15.357-2m15.357 2H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Se=[$e];function Be(s,t){return m(),_("svg",Te,Se)}var Ne={name:"heroicons-outline-refresh",render:Be};function Le(s){return s}var W=Le;function Re(s,t,n){switch(n.length){case 0:return s.call(t);case 1:return s.call(t,n[0]);case 2:return s.call(t,n[0],n[1]);case 3:return s.call(t,n[0],n[1],n[2])}return s.apply(t,n)}var Fe=Re,He=Fe,z=Math.max;function qe(s,t,n){return t=z(t===void 0?s.length-1:t,0),function(){for(var e=arguments,l=-1,r=z(e.length-t,0),d=Array(r);++l<r;)d[l]=e[t+l];l=-1;for(var i=Array(t+1);++l<t;)i[l]=e[l];return i[t]=n(d),He(s,this,i)}}var Ke=qe;function We(s){return function(){return s}}var ze=We,Ye=ze,Y=de,Ge=W,Ze=Y?function(s,t){return Y(s,"toString",{configurable:!0,enumerable:!1,value:Ye(t),writable:!0})}:Ge,Je=Ze,Qe=800,Xe=16,et=Date.now;function tt(s){var t=0,n=0;return function(){var e=et(),l=Xe-(e-n);if(n=e,l>0){if(++t>=Qe)return arguments[0]}else t=0;return s.apply(void 0,arguments)}}var ot=tt,st=Je,nt=ot,lt=nt(st),at=lt,it=W,rt=Ke,dt=at;function ct(s,t){return dt(rt(s,t,it),s+"")}var mt=ct;function ut(s,t){for(var n=-1,e=s==null?0:s.length,l=Array(e);++n<e;)l[n]=t(s[n],n,s);return l}var _t=ut;function pt(s,t,n,e){for(var l=s.length,r=n+(e?1:-1);e?r--:++r<l;)if(t(s[r],r,s))return r;return-1}var gt=pt;function ht(s){return s!==s}var xt=ht;function ft(s,t,n){for(var e=n-1,l=s.length;++e<l;)if(s[e]===t)return e;return-1}var vt=ft,bt=gt,yt=xt,wt=vt;function Pt(s,t,n){return t===t?wt(s,t,n):bt(s,yt,n)}var kt=Pt;function Ut(s,t,n,e){for(var l=n-1,r=s.length;++l<r;)if(e(s[l],t))return l;return-1}var It=Ut,At=_t,Ot=kt,Ct=It,Dt=me,Mt=ce,Vt=Array.prototype,G=Vt.splice;function jt(s,t,n,e){var l=e?Ct:Ot,r=-1,d=t.length,i=s;for(s===t&&(t=Mt(t)),n&&(i=At(s,Dt(n)));++r<d;)for(var f=0,v=t[r],p=n?n(v):v;(f=l(i,p,f,e))>-1;)i!==s&&G.call(i,f,1),G.call(s,f,1);return s}var Et=jt,Tt=Et;function $t(s,t){return s&&s.length&&t&&t.length?Tt(s,t):s}var St=$t,Bt=mt,Nt=St,Lt=Bt(Nt),Z=Lt;const Rt={emits:["hide-add-edit-area","init-products"],props:{"prop-product":Object,"prop-is-edit":Boolean},setup(s,{emit:t}){const n=h(!1),e=h(0),l=h({}),r=h(s.propIsEdit),d=h(!1),i=()=>{l.value.is_enabled=l.value.is_enabled===1?"\u555F\u7528":"\u672A\u555F\u7528"},f=()=>{if(r){const{id:a}=l.value;l.value={title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[],id:a}}else l.value={title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[]};e.value++,i()},v=a=>{if(l.value.imageUrl===a){l.value.imageUrl="",e.value++;return}l.value.imagesUrl.forEach((b,M)=>{b===a&&(console.log(b,M),l.value.imagesUrl.splice(M,1),e.value++)})},p=()=>{d.value=!0,Z(l.value.imagesUrl,"");const a={data:F({},l.value)};a.data.is_enabled==="\u555F\u7528"?a.data.is_enabled=1:a.data.is_enabled==="\u672A\u555F\u7528"&&(a.data.is_enabled=0),ae(r,a,l).then(b=>{t("init-products"),f(),w(),d.value=!1}).catch(b=>{console.dir(b),d.value=!1})},g=()=>{l.value.hasOwnProperty("imagesUrl")?l.value.imagesUrl.push(""):l.value.imagesUrl=[""]},w=()=>{t("hide-add-edit-area")},P=a=>{l.value.imagesUrl.push(a),Z(l.value.imagesUrl,"")},k=a=>{l.value.imageUrl=a};return $(()=>{s.propIsEdit===!1?(l.value={title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[]},i()):(l.value=ue(s.propProduct),i())}),{isLoading:d,isEdit:r,tempProduct:l,showUploadImages:n,UploadImageKey:e,close:w,resetData:f,emitImage:P,emitMainImage:k,submitProduct:p,deleteImage:v,addOtherImage:g}}},Ft={class:"absolute top-0 left-0 right-0 z-10 min-h-screen bg-gradient-to-br from-stone-50 via-stone-100 to-stone-200"},Ht={class:"mx-auto max-w-[1200px] px-5 sm:px-10 lg:px-10"},qt={class:"flex justify-between border-b pt-5 pb-[10px]"},Kt={class:"mb-1 text-xl font-medium text-green-800"},Wt={key:0},zt={key:1},Yt={class:"mt-8 grid grid-cols-1 sm:gap-x-8 lg:grid-cols-2"},Gt={class:"order-2 max-h-[calc(100vh-95px)] overflow-y-auto px-2 lg:order-1"},Zt=o("p",{class:"mb-3 font-medium tracking-wide text-stone-600"},[x(" \u4E3B\u8981\u5716\u7247 "),o("span",{class:"ml-1 text-sm text-stone-500"},"Main Image")],-1),Jt=o("p",{class:"mb-3 mt-5 font-medium tracking-wide text-stone-600"},[x(" \u5176\u4ED6\u5716\u7247 "),o("span",{class:"ml-1 text-sm text-stone-500"},"Main Image")],-1),Qt={class:"flex"},Xt=x(" \u65B0\u589E\u5176\u4ED6\u5716\u7247 "),eo={for:"productTitle"},to={class:"font-medium tracking-wide text-stone-600"},oo=x(" \u6A19\u984C "),so=o("span",{class:"ml-1 text-sm text-stone-500"},"Title",-1),no={for:"productCategory"},lo={class:"font-medium tracking-wide text-stone-600"},ao=x(" \u985E\u5225 "),io=o("span",{class:"ml-1 text-sm text-stone-500"},"Category",-1),ro={for:"productUnit"},co={class:"font-medium tracking-wide text-stone-600"},mo=x(" \u55AE\u4F4D "),uo=o("span",{class:"ml-1 text-sm text-stone-500"},"Unit",-1),_o={for:"countryOfOrigin"},po={class:"font-medium tracking-wide text-stone-600"},go=x(" \u539F\u7522\u5730 "),ho=o("span",{class:"ml-1 text-sm text-stone-500"},"Category",-1),xo={for:"productOriginPrice"},fo={class:"font-medium tracking-wide text-stone-600"},vo=x(" \u539F\u50F9 "),bo=o("span",{class:"ml-1 text-sm text-stone-500"},"Origin Price",-1),yo={for:"productPrice"},wo={class:"font-medium tracking-wide text-stone-600"},Po=x(" \u552E\u50F9 "),ko=o("span",{class:"ml-1 text-sm text-stone-500"},"Price",-1),Uo={for:"productDescription"},Io=o("p",{class:"font-medium tracking-wide text-stone-600"},[x(" \u7522\u54C1\u63CF\u8FF0 "),o("span",{class:"ml-1 text-sm text-stone-500"},"Description")],-1),Ao={for:"productContent"},Oo=o("p",{class:"font-medium tracking-wide text-stone-600"},[x(" \u7522\u54C1\u5167\u5BB9 "),o("span",{class:"ml-1 text-sm text-stone-500"},"Content")],-1),Co=o("p",{class:"font-medium tracking-wide text-stone-600"},[x(" \u555F\u7528\u72C0\u614B "),o("span",{class:"ml-1 text-sm text-stone-500"},"Enabled")],-1),Do={class:"mb-3 flex py-3"},Mo={for:"enabled",class:"mr-3 flex items-center"},Vo=o("span",null,"\u555F\u7528",-1),jo={for:"notEnabled",class:"flex items-center"},Eo=o("span",null,"\u672A\u555F\u7528",-1),To={class:"flex justify-end"},$o=["disabled"],So={key:0},Bo={key:1,class:"flex items-center justify-center"};function No(s,t,n,e,l,r){var P,k;const d=Ne,i=N,f=Ee,v=ke,p=S("ErrorMessage"),g=S("Field"),w=S("Form");return m(),_("div",Ft,[o("div",Ht,[o("div",qt,[o("h2",Kt,[e.isEdit?(m(),_("span",Wt,"\u7DE8\u8F2F\u7522\u54C1")):(m(),_("span",zt,"\u65B0\u589E\u7522\u54C1"))]),o("div",null,[o("button",{type:"button",title:"\u6E05\u7A7A\u8CC7\u6599(\u521D\u59CB\u5316)",onClick:t[0]||(t[0]=(...a)=>e.resetData&&e.resetData(...a)),class:"mr-5"},[c(d,{class:"text-xl text-stone-600 hover:text-green-600"})]),o("button",{type:"button",title:"\u53D6\u6D88",onClick:t[1]||(t[1]=(...a)=>e.close&&e.close(...a))},[c(i,{class:"text-xl text-stone-600 hover:text-red-600"})])])]),o("div",Yt,[o("div",Gt,[Zt,(m(),j(f,{"temp-product-image":e.tempProduct.imageUrl,key:e.UploadImageKey,onDeleteImage:e.deleteImage,onEmitImage:e.emitMainImage},null,8,["temp-product-image","onDeleteImage","onEmitImage"])),((k=(P=e.tempProduct)==null?void 0:P.imagesUrl)==null?void 0:k.length)?(m(),_(A,{key:0},[Jt,o("div",null,[(m(!0),_(A,null,B(e.tempProduct.imagesUrl,(a,b)=>(m(),j(f,{onDeleteImage:e.deleteImage,onEmitImage:e.emitImage,"temp-product-image":a,key:e.UploadImageKey+`${b}`},null,8,["onDeleteImage","onEmitImage","temp-product-image"]))),128))])],64)):C("",!0),o("button",{type:"button",class:"mt-1 mb-5 text-stone-500 hover:text-stone-800",onClick:t[2]||(t[2]=(...a)=>e.addOtherImage&&e.addOtherImage(...a))},[o("span",Qt,[Xt,c(v,{class:"mt-1 ml-1"})])])]),c(w,{onSubmit:e.submitProduct,class:"order-1 lg:order-2"},{default:se(()=>[o("label",eo,[o("p",to,[oo,so,c(p,{name:"\u7522\u54C1\u6A19\u984C",class:"ml-2 text-sm text-red-600"})]),c(g,{type:"text",id:"productTitle",class:"input-style",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u6A19\u984C",name:"\u7522\u54C1\u6A19\u984C",modelValue:e.tempProduct.title,"onUpdate:modelValue":t[3]||(t[3]=a=>e.tempProduct.title=a),modelModifiers:{trim:!0},rules:"required"},null,8,["modelValue"])]),o("label",no,[o("p",lo,[ao,io,c(p,{name:"\u7522\u54C1\u985E\u5225",class:"ml-2 text-sm text-red-600"})]),c(g,{type:"text",id:"productCategory",class:"input-style",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u985E\u5225",name:"\u7522\u54C1\u985E\u5225",modelValue:e.tempProduct.category,"onUpdate:modelValue":t[4]||(t[4]=a=>e.tempProduct.category=a),modelModifiers:{trim:!0},rules:"required"},null,8,["modelValue"])]),o("label",ro,[o("p",co,[mo,uo,c(p,{name:"\u7522\u54C1\u55AE\u4F4D",class:"ml-2 text-sm text-red-600"})]),c(g,{type:"text",id:"productUnit",class:"input-style",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u55AE\u4F4D",name:"\u7522\u54C1\u55AE\u4F4D",modelValue:e.tempProduct.unit,"onUpdate:modelValue":t[5]||(t[5]=a=>e.tempProduct.unit=a),rules:"required"},null,8,["modelValue"])]),o("label",_o,[o("p",po,[go,ho,c(p,{name:"\u539F\u7522\u5730",class:"ml-2 text-sm text-red-600"})]),c(g,{type:"text",id:"countryOfOrigin",class:"input-style",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u539F\u7522\u5730",name:"\u539F\u7522\u5730",modelValue:e.tempProduct.countryOfOrigin,"onUpdate:modelValue":t[6]||(t[6]=a=>e.tempProduct.countryOfOrigin=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),o("label",xo,[o("p",fo,[vo,bo,c(p,{name:"\u539F\u50F9",class:"ml-2 text-sm text-red-600"})]),c(g,{type:"number",id:"productOriginPrice",class:"input-style",name:"\u539F\u50F9",modelValue:e.tempProduct.origin_price,"onUpdate:modelValue":t[7]||(t[7]=a=>e.tempProduct.origin_price=a),modelModifiers:{number:!0},rules:"required|min_value:0|max_value:9999999"},null,8,["modelValue"])]),o("label",yo,[o("p",wo,[Po,ko,c(p,{name:"\u552E\u50F9",class:"ml-2 text-sm text-red-600"})]),c(g,{type:"number",id:"productPrice",class:"input-style",name:"\u552E\u50F9",modelValue:e.tempProduct.price,"onUpdate:modelValue":t[8]||(t[8]=a=>e.tempProduct.price=a),modelModifiers:{number:!0},rules:"required|min_value:0|max_value:9999999"},null,8,["modelValue"])]),o("label",Uo,[Io,O(o("textarea",{class:"input-style",id:"productDescription",rows:"3",name:"\u7522\u54C1\u63CF\u8FF0",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u63CF\u8FF0","onUpdate:modelValue":t[9]||(t[9]=a=>e.tempProduct.description=a)},null,512),[[H,e.tempProduct.description,void 0,{trim:!0}]])]),o("label",Ao,[Oo,O(o("textarea",{class:"input-style",id:"productContent",rows:"5",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u5167\u5BB9",name:"\u7522\u54C1\u5167\u5BB9","onUpdate:modelValue":t[10]||(t[10]=a=>e.tempProduct.content=a)},null,512),[[H,e.tempProduct.content,void 0,{trim:!0}]])]),Co,o("div",Do,[o("label",Mo,[O(o("input",{type:"radio",class:"mr-2 mt-[2px] border-2 border-gray-300 text-green-800 focus:border-gray-300 focus:ring-green-500","onUpdate:modelValue":t[11]||(t[11]=a=>e.tempProduct.is_enabled=a),value:"\u555F\u7528",id:"enabled"},null,512),[[q,e.tempProduct.is_enabled]]),Vo]),o("label",jo,[O(o("input",{type:"radio",class:"mr-2 mt-[2px] border-2 border-gray-300 text-green-800 focus:border-gray-300 focus:ring-green-500","onUpdate:modelValue":t[12]||(t[12]=a=>e.tempProduct.is_enabled=a),value:"\u672A\u555F\u7528",id:"notEnabled"},null,512),[[q,e.tempProduct.is_enabled]]),Eo])]),o("div",To,[o("button",{type:"submit",class:"fixed bottom-10 right-10 ml-auto h-[44px] w-[142px] border border-teal-500 bg-stone-100 text-lg text-teal-500 shadow-md hover:bg-teal-500 hover:text-white",disabled:e.isLoading},[e.isLoading?(m(),_("span",Bo,"\u63D0\u4EA4\u4E2D ...")):(m(),_("span",So,"\u63D0\u4EA4\u7522\u54C1\u8CC7\u6599"))],8,$o)])]),_:1},8,["onSubmit"])])])])}var Lo=E(Rt,[["render",No]]);const Ro={props:{"prop-data":Object},emits:["close-modal"],setup(s,{emit:t}){const n=h({});return $(()=>{n.value=s.propData}),{tempData:n,close:()=>{t("close-modal")}}}},Fo={class:"m-auto max-h-full max-w-3xl overflow-y-auto rounded-sm bg-gray-50 p-5 opacity-100"},Ho={class:"mb-7 flex items-center justify-between border-b pb-3"},qo={class:"text-xl font-bold text-gray-800"},Ko={class:"mb-8 flex flex-col sm:flex-row"},Wo={class:"relative overflow-hidden rounded sm:w-3/4"},zo={class:"absolute left-0 bg-sky-600 px-3 py-2 text-white"},Yo=["src"],Go={class:"flex w-1/2 flex-col py-2 sm:px-4"},Zo=o("h4",{class:"mr-2 text-lg font-bold text-gray-800"},"\u7522\u54C1\u63CF\u8FF0",-1),Jo={class:"mb-5 border border-transparent text-gray-700"},Qo=o("h4",{class:"text-lg font-bold text-gray-800"},"\u7522\u54C1\u5167\u5BB9",-1),Xo={class:"mb-5 text-gray-700"},es={class:"text-gray-500 line-through"},ts=x(" / \u5143 "),os={class:"mb-4 flex flex-col sm:mb-4 sm:-mr-3 sm:flex-row"},ss=["src"];function ns(s,t,n,e,l,r){const d=N;return m(),_("div",{class:"fixed left-0 top-0 z-10 h-full w-full bg-black bg-opacity-40 py-20 px-5 sm:px-20",onClick:t[1]||(t[1]=ne((...i)=>e.close&&e.close(...i),["self"]))},[o("div",Fo,[o("div",Ho,[o("h3",qo,y(e.tempData.title),1),o("button",{type:"button",onClick:t[0]||(t[0]=(...i)=>e.close&&e.close(...i))},[c(d,{class:"text-xl text-stone-600 hover:text-green-700"})])]),o("div",Ko,[o("div",Wo,[o("span",zo,y(e.tempData.category),1),o("img",{class:"object-cover",src:e.tempData.imageUrl,title:"\u7522\u54C1\u5716\u7247",alt:"\u7522\u54C1\u5716\u7247"},null,8,Yo)]),o("div",Go,[Zo,o("p",Jo,y(e.tempData.description),1),Qo,o("p",Xo,y(e.tempData.content),1),o("p",null,[x(y(e.tempData.price)+" ",1),o("span",es,y(e.tempData.origin_price),1),ts])])]),o("ul",os,[(m(!0),_(A,null,B(e.tempData.imagesUrl,i=>(m(),_("li",{key:i,class:"mb-5 overflow-hidden rounded-lg sm:mb-0 sm:mr-3 sm:rounded"},[o("img",{src:i,class:"object-cover sm:h-32",title:"\u7522\u54C1\u5716\u7247",alt:"\u7522\u54C1\u5716\u7247"},null,8,ss)]))),128))])])])}var ls=E(Ro,[["render",ns]]);const as={setup(){const s=h([]),t=h([]),n=h(1),e=h({}),l=h(!1),r=h(!1),d=h(!0),i=h(!1),f=10,v=()=>{d.value=!0,ie().then(u=>{d.value=!1;const U=Object.values(u.data.products).reverse();s.value=g(U,10),p(n.value)}).catch(u=>{console.log(u),d.value=!1})},p=u=>{t.value=s.value[u-1],n.value=u},g=(u=[],U=f)=>{const I=[];for(let V=0;V<u.length;V+=U)I.push(u.slice(V,V+U));return I},w=u=>{r.value=!0,e.value=u},P=()=>{l.value=!0,i.value=!1},k=u=>{e.value=u,D.emit("alert-data",{msg:`\u78BA\u5B9A\u8981\u522A\u9664\u7522\u54C1\u3010 ${u.title} \u3011\u55CE\uFF1F`,state:"danger",showButton:!0,target:"product"})},a=u=>{if(!u)D.emit("clear-alert"),e.value={};else{d.value=!0;const{id:U}=e.value;re(U).then(I=>{D.emit("alert-data",{msg:I.data.message,state:"success",showButton:!1}),e.value={},v(),setTimeout(()=>{D.emit("clear-alert")},1500),d.value=!1}).catch(I=>{console.dir(I),e.value={},d.value=!1})}},b=u=>{l.value=!0,i.value=!0,e.value=u},M=()=>{r.value=!1},J=()=>{l.value=!1};return $(()=>{v(),D.on("delete-product-result",a)}),{products:t,isLoading:d,isEdit:i,showModal:r,tempProduct:e,showAddEditArea:l,allProductsArr:s,currentPage:n,closeModal:M,toThousands:ve,showProductDetail:w,hideAddEit:J,getBackProducts:v,deleteProduct:a,addProduct:P,editProduct:b,checkDelete:k,changePage:p}}},is={class:"px-2 pt-10 sm:pt-20 lg:px-8"},rs={class:"overflow-x-auto"},ds={class:"shadow table rounded-md lg:w-full w-[800px]"},cs=o("thead",{class:"border-b"},[o("tr",{class:"bg-stone-200 text-left text-lg text-stone-900/60"},[o("th",{class:"w-3/12 py-2 px-6"},"\u7522\u54C1\u540D\u7A31"),o("th",{class:"w-2/12 px-2"},"\u539F\u50F9"),o("th",{class:"w-2/12 px-2"},"\u552E\u50F9"),o("th",{class:"w-2/12 px-2"},"\u555F\u7528\u72C0\u614B"),o("th",{class:"w-3/12 px-2"})])],-1),ms={class:"bg-stone-50"},us={class:"px-6 py-2"},_s={class:"px-2 py-2"},ps={class:"px-2 py-2"},gs={class:"px-2 py-2"},hs={class:"px-2 py-2"},xs={class:"mr-3 flex items-center"},fs=["onClick"],vs=["onClick"],bs=["onClick"],ys={class:"mt-6 flex justify-between"},ws=x(" \u65B0\u589E\u7522\u54C1 ");function Ps(s,t,n,e,l,r){const d=fe,i=xe,f=pe,v=ge,p=he,g=ls,w=le,P=_e,k=Lo;return m(),_(A,null,[O(c(d,null,null,512),[[K,e.isLoading]]),O(c(i,{"page-title":"\u7522\u54C1\u5217\u8868\u9801\u9762TOP"},null,512),[[K,!e.isLoading]]),o("div",is,[o("div",rs,[o("table",ds,[cs,o("tbody",ms,[(m(!0),_(A,null,B(e.products,a=>(m(),_("tr",{class:"border-b text-stone-800 hover:bg-stone-100",key:a.id},[o("td",us,y(a.title),1),o("td",_s,y(e.toThousands(a.origin_price)),1),o("td",ps,y(e.toThousands(a.price)),1),o("td",gs,[o("span",{type:"button",class:T(["font-medium",{"text-green-700":a.is_enabled,"text-red-700":!a.is_enabled}])},y(a.is_enabled?"\u555F\u7528":"\u672A\u555F\u7528"),3)]),o("td",hs,[o("div",xs,[o("button",{type:"button",class:"mr-5 text-stone-700 hover:scale-125 hover:text-sky-600",onClick:b=>e.showProductDetail(a)},[c(f,{class:"h-6 w-6"})],8,fs),o("button",{type:"button",class:"mr-10 text-stone-700 hover:scale-125 hover:text-yellow-500",onClick:b=>e.editProduct(a)},[c(v,{class:"h-6 w-6"})],8,vs),o("button",{type:"button",class:"text-stone-700 hover:scale-110 hover:text-red-600",onClick:b=>e.checkDelete(a)},[c(p,{class:"h-6 w-6"})],8,bs)])])]))),128))])])]),e.showModal?(m(),j(g,{key:0,"prop-data":e.tempProduct,onCloseModal:e.closeModal},null,8,["prop-data","onCloseModal"])):C("",!0),o("div",ys,[o("button",{type:"button",class:"main-button mr-18 flex items-center",onClick:t[0]||(t[0]=(...a)=>e.addProduct&&e.addProduct(...a))},[ws,c(w,{class:"ml-1 mt-[1px] h-5 w-5"})]),c(P,{view:"product",data:e.allProductsArr,"current-page-num":e.currentPage,onChangePage:e.changePage},null,8,["data","current-page-num","onChangePage"])])]),e.showAddEditArea?(m(),j(k,{key:0,"prop-is-edit":e.isEdit,"prop-product":e.tempProduct,onHideAddEditArea:e.hideAddEit,onInitProducts:e.getBackProducts},null,8,["prop-is-edit","prop-product","onHideAddEditArea","onInitProducts"])):C("",!0)],64)}var Es=E(as,[["render",Ps]]);export{Es as default};
