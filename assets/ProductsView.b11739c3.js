import{a as C,_ as I}from"./heart.b6f6fd11.js";import{o as l,v as d,w as o,y as i,A as L,c as S,W as k,X as A,B as M,K as h,Y as O,Z as N,L as y,M as T,C as j,G as g,D}from"./vendor.93ccd42a.js";import{s as b,g as B}from"./localStorageFn.5c1446a8.js";import{e as c}from"./emitter.cd373924.js";import{_ as F}from"./index.8d779fa5.js";import{_ as z}from"./PageIsLoading.331d21b6.js";import{_ as V}from"./PageTitle.828e6fdc.js";import{a as R,p as Y}from"./axios.79eff361.js";import{t as $}from"./toThousands.bee33b94.js";const E={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},G=o("g",{fill:"none"},[o("path",{d:"M4.318 6.318a4.5 4.5 0 0 0 0 6.364L12 20.364l7.682-7.682a4.5 4.5 0 0 0-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 0 0-6.364 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),K=[G];function U(r,p){return l(),d("svg",E,K)}var P={name:"heroicons-outline-heart",render:U};const W={components:{HeroiconsSolidHeart:C,HeroiconsOutlineHeart:P},props:{propId:String,"prop-favlist-local":Object},setup(r,{emit:p}){const a=i(""),t=i({}),s=i(!1),u=()=>{t.value.favlistData.indexOf(a.value)===-1?(_(),s.value=!0):(f(),s.value=!1)},_=()=>{t.value.favlistData.push(a.value),b("favlistLocalStorage",t.value),c.emit("open-front-alert",{msg:"\u5DF2\u52A0\u5165\u5546\u54C1\u5230\u6211\u7684\u6700\u611B",showButton:!1,state:"success"}),setTimeout(()=>{c.emit("close-front-alert")},1e3)},f=()=>{const m=t.value.favlistData.indexOf(a.value);t.value.favlistData.splice(m,1),b("favlistLocalStorage",t.value),c.emit("open-front-alert",{msg:"\u5DF2\u5C07\u5546\u54C1\u5F9E\u6211\u7684\u6700\u611B\u79FB\u9664",showButton:!1,state:"warning"}),setTimeout(()=>{c.emit("close-front-alert")},1e3)};return L(()=>{a.value=r.propId,t.value=r.propFavlistLocal,t.value.favlistData.indexOf(a.value)===-1?s.value=!1:s.value=!0}),{heartSwitch:s,addToFavlist:_,favlistHandler:u}}};function X(r,p,a,t,s,u){const _=C,f=P;return l(),d("div",null,[t.heartSwitch===!0?(l(),S(_,{key:0,onClick:k(t.favlistHandler,["stop"])},null,8,["onClick"])):(l(),S(f,{key:1,onClick:k(t.favlistHandler,["stop"])},null,8,["onClick"]))])}var Z=F(W,[["render",X]]);const q={setup(){const r=i([]),p=i([]),a=i(""),t=i(!0),s=i(!1),u=i(""),_=A(),f=i({}),m=["\u5168\u90E8\u5546\u54C1","\u624B\u5DE5\u9999\u7682","\u9020\u578B\u9999\u7682","\u5929\u7136\u7CBE\u6CB9"];M(a,(n,w)=>{n==="\u5168\u90E8\u5546\u54C1"?p.value=r.value:p.value=r.value.filter(H=>H.category===n)});const x=()=>{R().then(n=>{r.value=n.data.products,a.value="\u5168\u90E8\u5546\u54C1",t.value=!1}).catch(n=>{c.emit("open-front-alert",{msg:"\u53D6\u5F97\u7522\u54C1\u5217\u8868\u5931\u6557\uFF01",showButton:!1,state:"danger"}),t.value=!1})},e=n=>{u.value=n,s.value=!0,Y(n).then(w=>{c.emit("open-front-alert",{msg:w.data.message,showButton:!1,state:"success"}),s.value=!1,u.value="",setTimeout(()=>{c.emit("close-front-alert")},1500),c.emit("update-cartlen")}).catch(w=>{c.emit("open-front-alert",{msg:"\u7121\u6CD5\u65B0\u589E\u5546\u54C1\u81F3\u8CFC\u7269\u8ECA\uFF01",showButton:!1,state:"danger"}),s.value=!1,u.value="",setTimeout(()=>{c.emit("close-front-alert")},1500)})},v=n=>{_.push("/product/"+n)};return L(()=>{x(),B("favlistLocalStorage")===null&&b("favlistLocalStorage",{favlistData:[]}),f.value=B("favlistLocalStorage")}),{products:r,filteredData:p,categoryStr:a,isLoading:t,categoryArr:m,favlistData:f,addCartLoading:s,addCartLoadingId:u,toThousands:$,addToCart:e,linkToProduct:v}}},J={class:"mx-auto max-w-[1260px] px-5 lg:px-10"},Q={class:"mb-8 flex flex-col items-center text-lg md:flex-row md:justify-center"},tt=["onClick"],et={class:"mb-8 grid grid-cols-2 gap-x-6 gap-y-8 bg-white lg:grid-cols-4 lg:gap-x-4 lg:gap-y-6"},ot=["onClick"],st={class:"relative overflow-hidden"},at={class:"absolute left-0 z-10 bg-yellow-500/80 p-1 text-xs tracking-widest text-white"},nt=["src"],lt={class:"flex min-h-[200px] flex-col justify-between py-5 px-5"},rt={class:"mb-3 px-2 text-center text-xl font-medium tracking-wider text-stone-700"},it={class:"mb-2 flex items-center justify-center px-3 font-sans text-xl text-green-800"},ct={class:"ml-2 text-sm text-stone-500 line-through"},dt=["onClick","disabled"],ut={key:0,class:"flex items-center"},_t=D(" \u52A0\u5165\u4E2D... "),ft=o("div",{class:"ml-4 h-[10px] w-[10px] animate-ping rounded-full bg-white"},null,-1),pt=[_t,ft],mt={key:1,class:"flex"},gt=D(" \u52A0\u5230\u8CFC\u7269\u8ECA ");function vt(r,p,a,t,s,u){const _=V,f=z,m=Z,x=I;return l(),d(y,null,[h(_,{title:"\u5546\u54C1\u4E00\u89BD"}),O(h(f,null,null,512),[[N,t.isLoading]]),o("div",J,[o("div",Q,[(l(!0),d(y,null,T(t.categoryArr,e=>(l(),d("div",{key:e,class:"mx-2 lg:mx-4"},[o("button",{type:"button",class:j(["px-3 py-1 lg:px-10 lg:py-2",{"rounded  font-medium text-green-800":t.categoryStr===e,"hover:text-green-700":t.categoryStr!==e}]),onClick:v=>t.categoryStr=e},g(e),11,tt)]))),128))]),o("ul",et,[(l(!0),d(y,null,T(t.filteredData,e=>(l(),d("li",{class:"relative cursor-pointer overflow-hidden rounded shadow-lg",onClick:v=>t.linkToProduct(e.id)},[o("div",st,[o("span",at,g(e.category),1),h(m,{class:"absolute right-2 top-2 z-10 text-2xl text-rose-400","prop-id":e.id,"prop-favlist-local":t.favlistData},null,8,["prop-id","prop-favlist-local"]),o("img",{src:e.imageUrl,class:"h-[200px] object-cover duration-300 hover:scale-125",alt:""},null,8,nt)]),o("div",lt,[o("div",null,[o("p",rt," \u3010 "+g(e.title)+" \u3011 ",1),o("p",it,[o("span",null,"NT$\xA0"+g(t.toThousands(e.price)),1),o("span",ct,"NT$\xA0"+g(t.toThousands(e.origin_price)),1)])]),o("button",{type:"button",class:j(["flex justify-center rounded bg-yellow-600 py-3 text-lg tracking-wider text-white hover:bg-yellow-700 focus:ring focus:ring-yellow-400",{"cursor-not-allowed":t.addCartLoading}]),onClick:k(v=>t.addToCart(e.id),["stop"]),disabled:t.addCartLoading},[t.addCartLoading&&t.addCartLoadingId===e.id?(l(),d("span",ut,pt)):(l(),d("span",mt,[gt,h(x,{class:"ml-1 mt-[6px] text-base"})]))],10,dt)])],8,ot))),256))])])],64)}var Tt=F(q,[["render",vt]]);export{Tt as default};
